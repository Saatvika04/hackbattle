import{r as c,j as a,d as I,e as M}from"./assets/main-oeVMPyfS.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var b=function(t,e){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)s.hasOwnProperty(o)&&(r[o]=s[o])},b(t,e)};function B(t,e){b(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var V=100,W=100,R=50,k=50,C=50;function E(t){var e=t.className,r=t.counterClockwise,s=t.dashRatio,o=t.pathRadius,n=t.strokeWidth,l=t.style;return c.createElement("path",{className:e,style:Object.assign({},l,F({pathRadius:o,dashRatio:s,counterClockwise:r})),d:L({pathRadius:o,counterClockwise:r}),strokeWidth:n,fillOpacity:0})}function L(t){var e=t.pathRadius,r=t.counterClockwise,s=e,o=r?1:0;return`
      M `+k+","+C+`
      m 0,-`+s+`
      a `+s+","+s+" "+o+" 1 1 0,"+2*s+`
      a `+s+","+s+" "+o+" 1 1 0,-"+2*s+`
    `}function F(t){var e=t.counterClockwise,r=t.dashRatio,s=t.pathRadius,o=Math.PI*2*s,n=(1-r)*o;return{strokeDasharray:o+"px "+o+"px",strokeDashoffset:(e?-n:n)+"px"}}var H=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return R-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var r=this.props,s=r.value,o=r.minValue,n=r.maxValue,l=Math.min(Math.max(s,o),n);return(l-o)/(n-o)},e.prototype.render=function(){var r=this.props,s=r.circleRatio,o=r.className,n=r.classes,l=r.counterClockwise,u=r.styles,m=r.strokeWidth,p=r.text,h=this.getPathRadius(),g=this.getPathRatio();return c.createElement("svg",{className:n.root+" "+o,style:u.root,viewBox:"0 0 "+V+" "+W,"data-test-id":"CircularProgressbar"},this.props.background?c.createElement("circle",{className:n.background,style:u.background,cx:k,cy:C,r:R}):null,c.createElement(E,{className:n.trail,counterClockwise:l,dashRatio:s,pathRadius:h,strokeWidth:m,style:u.trail}),c.createElement(E,{className:n.path,counterClockwise:l,dashRatio:g*s,pathRadius:h,strokeWidth:m,style:u.path}),p?c.createElement("text",{className:n.text,style:u.text,x:k,y:C},p):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e})(c.Component);function A(t){var e=t.rotation,r=t.strokeLinecap,s=t.textColor,o=t.textSize,n=t.pathColor,l=t.pathTransition,u=t.pathTransitionDuration,m=t.trailColor,p=t.backgroundColor,h=e==null?void 0:"rotate("+e+"turn)",g=e==null?void 0:"center center";return{root:{},path:y({stroke:n,strokeLinecap:r,transform:h,transformOrigin:g,transition:l,transitionDuration:u==null?void 0:u+"s"}),trail:y({stroke:m,strokeLinecap:r,transform:h,transformOrigin:g}),text:y({fill:s,fontSize:o}),background:y({fill:p})}}function y(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}function X(){const[t,e]=c.useState(new Date),[r,s]=c.useState(0),[o,n]=c.useState(!1),[l,u]=c.useState(!1),[m,p]=c.useState([{category:"Development",minutes:45,percentage:40},{category:"Social Media",minutes:30,percentage:27},{category:"Learning",minutes:25,percentage:22},{category:"Other",minutes:12,percentage:11}]);c.useEffect(()=>{const i=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(i)},[]),c.useEffect(()=>{if(typeof chrome<"u"&&chrome.storage){const i=new Date().toDateString();chrome.storage.local.get([i],d=>{if(d[i]){const v=d[i];s(Math.round(v.totalTime/1e3/60));const D=Object.entries(v.timeByCategory||{}),S=v.totalTime||1,T=D.map(([O,N])=>({category:O,minutes:Math.round(N/1e3/60),percentage:Math.round(N/S*100)}));T.length>0&&p(T)}})}},[]);const h=()=>{n(!o),chrome.runtime&&chrome.runtime.sendMessage({type:o?"STOP_TIMER":"START_TIMER"})},g=["Development","Learning","Research","Communication"],w=m.filter(i=>g.includes(i.category)).reduce((i,d)=>i+d.minutes,0),f=m.reduce((i,d)=>i+d.minutes,0),x=f>0?Math.round(w/f*100):100,P=i=>i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return a.jsxs("div",{className:"w-80 h-96 bg-white p-4 rounded-lg shadow-lg overflow-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"FocusTracker"}),a.jsx("div",{className:"text-sm text-gray-600",children:P(t)})]}),a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-20 h-20",children:a.jsx(H,{value:x,text:`${x}%`,styles:A({textSize:"16px",pathColor:x>=70?"#10B981":x>=50?"#F59E0B":"#EF4444",textColor:"#1F2937",trailColor:"#E5E7EB"})})})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Today's Focus Time"}),a.jsxs("p",{className:"text-xl font-semibold text-gray-800",children:[r," minutes"]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Focus Score: ",x,"%"]})]}),a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("button",{onClick:h,className:`px-6 py-2 rounded-lg text-white font-medium transition-colors ${o?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:o?"Pause Tracking":"Start Tracking"})}),a.jsxs("button",{onClick:()=>u(!l),className:"w-full py-2 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm mb-3",children:[l?"Hide":"Show"," Daily Report"]}),l&&a.jsxs("div",{className:"border-t pt-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Today's Breakdown"}),a.jsx("div",{className:"space-y-2",children:m.map((i,d)=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:`hsl(${d*60}, 70%, 50%)`}}),a.jsx("span",{className:"text-gray-600",children:i.category})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"font-medium text-gray-800",children:[i.minutes,"m"]}),a.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",i.percentage,"%)"]})]})]},d))}),f>0&&a.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:a.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[a.jsx("span",{children:"Total Time:"}),a.jsxs("span",{children:[f," minutes"]})]})})]})]})}function j(){const t=document.getElementById("root");if(!t){console.error("Root container not found!");return}try{I.createRoot(t).render(a.jsx(M.StrictMode,{children:a.jsx(X,{})}))}catch(e){console.error("Failed to render popup:",e),t.innerHTML=`
      <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">
        <h2>FocusTracker</h2>
        <p>Loading extension...</p>
      </div>
    `}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",j):j();setTimeout(()=>{document.getElementById("root")?.hasChildNodes()||j()},100);
